connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Async API Spec
  type: object

  required:
    - credentials
    - create_job_path
    - polling_request_path
    - download_request_path

  additionalProperties: true
  properties:

    credentials:
      title: Authentication
      description: Choose how to authenticate.
      type: object
      order: 0
      oneOf:
        - title: Session Token
          required: 
            - auth_type 
            - username
            - password
            - session_token_login_path
            - session_token_path
          properties:
            auth_type:
              type: string
              const: basic
              order: 0
            session_token_login_path:
              type: string
              title: Login Path
              description: Session Token Login Path
              airbyte_secret: false
              order: 1
            username:
              type: string
              title: Username
              description: Username
              airbyte_secret: false
              order: 2
            password:
              type: string
              title: Password
              description: Password
              airbyte_secret: true
              order: 3
            session_token_path:
              type: string
              title: Token Path
              description: Session Token Path
              airbyte_secret: false
              order: 4
            session_token_exp_duration:
              type: string
              title: Token Duration
              description: ISO 8601 duration string for session token expiration
              airbyte_secret: false
              order: 5
        - title: HTTP Basic
          required: 
            - auth_type 
            - username
            - password
          properties:
            auth_type:
              type: string
              const: session_token
              order: 1
            username:
              type: string
              title: Username
              description: Username
              airbyte_secret: false
            password:
              type: string
              title: Password
              description: Password
              airbyte_secret: true
      
      create_request_path:
        type: string
        title: API Request Path 
        description: Path to create API job 
        airbyte_secret: false

      polling_request_path:
        type: string
        Title: Path to Poll for Job Status
        airbyte_secret: false

      url_extractor_path:
        type: string
        title: Path in completed response with Download URL / Download URL fragment
        airbyte_secret: false

      download_request_path:
        type: string
        title: Path to Download API Response
        airbyte_secret: false
      
      status_path:
        type: string
        title: Status Path
        description: Path in polling response with API job status
        airbyte_secret: false

      create_request_body_json:
        type: object
        description: JSON body for create job request
        airbyte_secret: false

